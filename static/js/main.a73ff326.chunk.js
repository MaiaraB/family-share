(this["webpackJsonpfamily-share"]=this["webpackJsonpfamily-share"]||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=(a(93),a(20)),l=a(10),u=a(165),s=a(164),m=a(152),d=(a(94),a(12)),f=a(155),p=a(157),b=a(159),g=a(158),v=a(69),h=a.n(v),E=a(70),O=a.n(E),j=a(167),x=a(74),w=a(39),y=a.n(w),C=a(47),k=a(44),S=a.n(k),N=Object(n.createContext)();function D(e){var t=JSON.parse(localStorage.getItem("tokens")),a=Object(n.useState)(t),o=Object(d.a)(a,2),c=o[0],i=o[1],l=Object(n.useState)(),u=Object(d.a)(l,2),s=u[0],m=u[1],f=function(e){void 0===e?(localStorage.removeItem("tokens"),i()):(localStorage.setItem("tokens",JSON.stringify(e)),i(e))},p=function(e){null!==e&&void 0!==e&&"undefined"!==e&&S.a.get("".concat("http://localhost:4000/api/tokenInfo","/").concat(e)).then((function(e){m(e.data)})).catch((function(e){m({}),f()}))},b=function(){var e=Object(C.a)(y.a.mark((function e(t,a){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:4000/api/login",{email:t,password:a});case 3:if(200!==(n=e.sent).status){e.next=10;break}return f(n.data.token),p(n.data.token),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}(),g=function(){var e=Object(C.a)(y.a.mark((function e(t,a,n,r,o,c,i,l){var u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.post("http://localhost:4000/api/signup",{email:t,firstName:a,lastName:n,phoneNumber:r,country:o,username:c,password:i,confirmPassword:l});case 3:if(200!==(u=e.sent).status){e.next=10;break}return f(u.data.token),p(u.data.token),e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a,n,r,o,c,i,l){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p(c)}),[c]),r.a.createElement(N.Provider,Object.assign({value:{userData:s,login:b,logout:function(){f(),m()},signup:g}},e))}var B=function(){return Object(n.useContext)(N)},I=Object(m.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function M(){var e=I(),t=B(),a=t.userData,n=t.logout,o=r.a.useState(null),c=Object(d.a)(o,2),i=c[0],l=c[1],u=Boolean(i),s=function(){l(null)};return r.a.createElement("div",{className:e.root},r.a.createElement(f.a,{position:"static"},r.a.createElement(p.a,null,r.a.createElement(g.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu"},r.a.createElement(h.a,null)),r.a.createElement(b.a,{variant:"h6",className:e.title},"Family Share"),a&&r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)},color:"inherit"},r.a.createElement(O.a,null)),r.a.createElement(x.a,{id:"menu-appbar",anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:s},r.a.createElement(j.a,{onClick:s},"My account"),r.a.createElement(j.a,{onClick:function(){l(null),n()}},"Log out"))))))}var z=a(28),P=a(29);function T(){var e=Object(z.a)(["\n  background-color: red;\n"]);return T=function(){return e},e}function W(){var e=Object(z.a)(["\n  width: 50%;\n  margin-bottom: 1rem;\n"]);return W=function(){return e},e}function F(){var e=Object(z.a)(["\n  background: linear-gradient(to bottom, #6371c7, #5563c1);\n  border-color: #3f4eae;\n  border-radius: 3px;\n  padding: 1rem;\n  color: white;\n  fonrt-weight: 700;\n  width: 100%;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n"]);return F=function(){return e},e}function J(){var e=Object(z.a)(["\n  padding: 1rem;\n  border: 1px solid #999;\n  margin-bottom: 1rem;\n  font-size: 0.8rem;\n  border-radius: 3px;\n"]);return J=function(){return e},e}function L(){var e=Object(z.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n"]);return L=function(){return e},e}function A(){var e=Object(z.a)(["\n  box-sizing: border-box;\n  max-width: 410px;\n  margin: 0 auto;\n  padding: 0 2rem;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return A=function(){return e},e}P.a.div(A()),P.a.div(L()),P.a.input(J()),P.a.button(F()),P.a.img(W()),P.a.div(T());var G=function(){return r.a.createElement("div",null,r.a.createElement("div",null,"Calendar Page"))};var V=function(e){return r.a.createElement("div",null,"New Task Page")},U=a(75);var R=function(e){var t=e.component,a=Object(U.a)(e,["component"]),n=B().userData;return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login",state:{referer:e.location}}})}}))},$=a(160),q=a(162),H=a(161),K=a(166),Q=a(163),X=Object(m.a)((function(e){return{root:{minWidth:275,maxWidth:500,marginBottom:40,"& .MuiTextField-root":{margin:e.spacing(1),width:"50ch"},"& .MuiCardContent-root":{display:"flex",flexDirection:"column",alignItems:"center"},"& .MuiCardActions-root":{justifyContent:"center"}},form:{display:"flex",flexDirection:"column"},pos:{marginBottom:12}}})),Y=function(e){var t=X(),a=Object(n.useState)(""),o=Object(d.a)(a,2),c=o[0],u=o[1],s=Object(n.useState)(""),m=Object(d.a)(s,2),f=m[0],p=m[1],g=Object(n.useState)(!1),v=Object(d.a)(g,2),h=(v[0],v[1]),E=B(),O=E.userData,j=E.login,x=e.location.state&&e.location.state.referer?e.location.state.referer:"/";return O?r.a.createElement(l.a,{to:x}):r.a.createElement($.a,{className:t.root,variant:"outlined"},r.a.createElement(H.a,null,r.a.createElement(b.a,{className:t.pos,variant:"h4"}," Log In"),r.a.createElement("form",{className:t.form,noValidade:!0,autoComplete:"off"},r.a.createElement(K.a,{id:"email",type:"email",label:"email",variant:"outlined",value:c,onChange:function(e){u(e.target.value)}}),r.a.createElement(K.a,{id:"password",type:"password",label:"password",variant:"outlined",value:f,onChange:function(e){p(e.target.value)}})),r.a.createElement(i.b,{to:"/signup"},"Don't have an account")),r.a.createElement(q.a,null,r.a.createElement(Q.a,{size:"medium",variant:"contained",color:"primary",onClick:function(){console.log("POST LOGIN"),j(c,f).then((function(e){e||h(!0)}))}},"Sign In")))},Z=Object(m.a)((function(e){return{root:{minWidth:275,maxWidth:500,marginBottom:40,"& .MuiTextField-root":{margin:e.spacing(1),width:"50ch"},"& .MuiCardContent-root":{display:"flex",flexDirection:"column",alignItems:"center"},"& .MuiCardActions-root":{justifyContent:"center"}},form:{display:"flex",flexDirection:"column"},pos:{marginBottom:12}}})),_=function(e){var t=Z(),a=Object(n.useState)(""),o=Object(d.a)(a,2),c=o[0],u=o[1],s=Object(n.useState)(""),m=Object(d.a)(s,2),f=m[0],p=m[1],g=Object(n.useState)(""),v=Object(d.a)(g,2),h=v[0],E=v[1],O=Object(n.useState)(""),j=Object(d.a)(O,2),x=j[0],w=j[1],y=Object(n.useState)(""),C=Object(d.a)(y,2),k=C[0],S=C[1],N=Object(n.useState)(""),D=Object(d.a)(N,2),I=D[0],M=D[1],z=Object(n.useState)(""),P=Object(d.a)(z,2),T=P[0],W=P[1],F=Object(n.useState)(""),J=Object(d.a)(F,2),L=J[0],A=J[1],G=Object(n.useState)(),V=Object(d.a)(G,2),U=(V[0],V[1]),R=B(),X=R.userData,Y=R.signup,_=e.location.state&&e.location.state.referer?e.location.state.referer:"/";return X?(console.log("referer: ",_),r.a.createElement(l.a,{to:_})):r.a.createElement($.a,{className:t.root,variant:"outlined"},r.a.createElement(H.a,null,r.a.createElement(b.a,{className:t.pos,variant:"h4"},"Sign Up"),r.a.createElement("form",{className:t.form,noValidade:!0,autoComplete:"off"},r.a.createElement(K.a,{id:"email",type:"email",label:"email",variant:"outlined",value:c,onChange:function(e){u(e.target.value)}}),r.a.createElement(K.a,{id:"firstName",type:"text",label:"First name",variant:"outlined",value:f,onChange:function(e){p(e.target.value)}}),r.a.createElement(K.a,{id:"lastName",type:"text",label:"Last name",variant:"outlined",value:h,onChange:function(e){E(e.target.value)}}),r.a.createElement(K.a,{id:"phoneNumber",type:"text",label:"Phone number",variant:"outlined",value:x,onChange:function(e){w(e.target.value)}}),r.a.createElement(K.a,{id:"country",type:"text",label:"Country",variant:"outlined",value:k,onChange:function(e){S(e.target.value)}}),r.a.createElement(K.a,{id:"username",type:"text",label:"username",variant:"outlined",value:I,onChange:function(e){M(e.target.value)}}),r.a.createElement(K.a,{id:"password",type:"password",label:"password",variant:"outlined",value:T,onChange:function(e){W(e.target.value)}}),r.a.createElement(K.a,{id:"confirmPassword",type:"password",label:"password again",variant:"outlined",value:L,onChange:function(e){A(e.target.value)},onBlur:function(e){L!==T?U({message:"Confirm password does not match password"}):U()}})),r.a.createElement(i.b,{to:"/login"},"Already have an account?")),r.a.createElement(q.a,null,r.a.createElement(Q.a,{size:"medium",variant:"contained",color:"primary",onClick:function(){Y(c,f,h,x,k,I,T,L).then((function(e){e||U({message:"Something went wrong with the sign up. Verify all the fields"})}))}},"Sign Up")))},ee=function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(i.b,{to:"/"},"Calendar")),r.a.createElement("li",null,r.a.createElement(i.b,{to:"/new"},"New task")))},te=Object(m.a)((function(e){return{container:{display:"flex",justifyContent:"center",marginTop:"30px"}}})),ae=function(e){var t=te(),a=B().userData;return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(s.a,null),r.a.createElement(M,null),a?r.a.createElement(ee,null):r.a.createElement(l.a,{to:{pathname:"/login",state:{referer:e.location}}}),r.a.createElement(u.a,{className:t.container,fixed:!0},r.a.createElement(l.b,{path:"/login",component:Y}),r.a.createElement(l.b,{path:"/signup",component:_}),r.a.createElement(R,{exact:!0,path:"/",component:G}),r.a.createElement(R,{path:"/new",component:V}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null,r.a.createElement(ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a(118)},93:function(e,t,a){},94:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.a73ff326.chunk.js.map